model GizmoUser {
  id       String @id @default(uuid())
  guid     String @unique
  username String

  balance Float @default(0)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  telegramUser   TelegramUser?
  telegramUserId String?       @unique

  @@index([telegramUserId])
}

model TelegramUser {
  id                       Int      @id
  is_bot                   Boolean?
  first_name               String
  last_name                String?
  username                 String?
  language_code            String?
  is_premium               Boolean?
  photo_url                String?
  added_to_attachment_menu Boolean?
  allows_write_to_pm       Boolean?

  role Role @default(GUEST)

  gizmoProfile   GizmoUser? @relation(fields: [gizmoProfileId], references: [id])
  gizmoProfileId String?    @unique

  bookings Booking[]

  senderPayments   Payment[] @relation("SenderPayment")
  receiverPayments Payment[] @relation("ReceiverPayment")

  notifications      Notification[]
  paymentCredentials PaymentCredentials[]

  @@index([gizmoProfileId])
}

enum Role {
  ADMIN
  MANAGER
  USER
  GUEST
}
